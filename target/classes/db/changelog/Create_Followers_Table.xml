<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.5.xsd">

    <!-- Create the followers table -->



    <changeSet id="11" author="NK">
        <sql>
            CREATE TABLE followers(
            s_no int PRIMARY KEY IDENTITY(50,1),
            followee_id INT not null REFERENCES users(user_id) on DELETE CASCADE on UPDATE CASCADE,
            follower_id int not null REFERENCES users(user_id) on DELETE no action,
            created_at DATETIME not null
            )
        </sql>
    </changeSet>

    <!-- Insert into the followers table -->
    <changeSet id="12" author="NK">
        <sql>
            INSERT into followers VALUES('100','101','2020-01-02'),
            ('100','103','2020-01-04'),
            ('100','104','2020-01-05'),
            ('101','100','2020-01-02'),
            ('101','105','2020-01-06'),
            ('101','102','2020-01-05')

        </sql>

    </changeSet>
    <changeSet id="13" author="NK">
        <sql>
            ALTER  TABLE followers
            ADD updated_at datetime

        </sql>
    </changeSet>
    <changeSet id="14" author="NK">
        <sql>

            UPDATE followers
            SET updated_at = '2020-01-03'
            WHERE s_no=50

        </sql>
    </changeSet>


</databaseChangeLog>
