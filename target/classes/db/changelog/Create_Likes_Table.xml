<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.5.xsd">

    <!-- Create the clikes table -->



    <changeSet id="41" author="NK">
        <sql>
            CREATE TABLE likes(
            like_id int primary key IDENTITY(5000,1),
            post_id int not null REFERENCES posts(post_id) on DELETE CASCADE on UPDATE CASCADE,
            user_id int not NULL REFERENCES users(user_id) on DELETE no action,
            created_at DATETIME not null
            )


        </sql>
    </changeSet>

    <!-- Insert into the likes table -->
    <changeSet id="42" author="NK">
        <sql>
            insert into likes values('1','102','2020-01-26'),
            ('2','100','2020-01-18'),
            ('3','101','2020-01-30'),
            ('4',	'104',	'2020-01-31'),
            ('5',	'100',	'2020-01-28'),
            ('6',	'100',	'2020-01-29')

        </sql>
    </changeSet>
    <changeSet id="43" author="NK">
        <sql>
            ALTER  TABLE likes
            ADD updated_at datetime

        </sql>
    </changeSet>
    <changeSet id="44" author="NK">
        <sql>

            UPDATE likes
            SET updated_at = '2020-01-27'
            WHERE like_id=5000

        </sql>
    </changeSet>

</databaseChangeLog>
