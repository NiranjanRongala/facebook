<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.5.xsd">

    <!-- Create the comments table -->



    <changeSet id="31" author="NK">
        <sql>
            CREATE TABLE comments(
            comment_id int primary KEY IDENTITY(2000,1),
            post_id int not null REFERENCES posts(post_id) on DELETE CASCADE on UPDATE CASCADE,
            user_id int not NULL REFERENCES users(user_id) on DELETE  no action,
            comment VARCHAR(100) not null ,
            created_at DATETIME not null
            )

        </sql>
    </changeSet>

    <!-- Insert into the comments table -->
    <changeSet id="32" author="NK">
        <sql>

            insert into comments VALUES('1','101','hi','2020-01-25'),
            ('2','105','happy pongal','2020-01-16'),
            ('3','103','gud mrng','2020-01-26'),
            ('4','100','hello','2020-01-31'),
            ('5','104','happy republic day','2020-01-26'),
            ('6','100','hi','2020-01-28')

        </sql>
    </changeSet>
    <changeSet id="33" author="NK">
        <sql>
            ALTER  TABLE comments
            ADD updated_at datetime

        </sql>
    </changeSet>
    <changeSet id="35" author="NK">
        <sql>

            UPDATE comments
            SET updated_at = '2020-01-26'
            WHERE comment_id=2000

        </sql>
    </changeSet>

</databaseChangeLog>
